/* =========================
   THEME TOKENS
========================= */
:root{
  --color-bg:#fafafa;
  --color-primary:#dc143c;             /* crimson */
  --color-primary-weak:#fff0f3;
  --color-muted:#444;
  --color-border:#e5e7eb;
  --color-border-strong:#cfd6e0;
  --color-card:rgba(255,255,255,.9);
  --shadow-lg:0 10px 30px rgba(0,0,0,.08);
  --shadow-md:0 4px 12px rgba(0,0,0,.06);
  --radius-md:12px;
  --radius-lg:16px;
  --h1:24px;
  --fz-base:14px;
  --chip-bg:#f6f8fb;
}

/* =========================
   RESET & BASE
========================= */
*{ box-sizing:border-box; }
html,body{ margin:0; padding:0; height:100%; }
body{
  display:flex; flex-direction:column; align-items:center; min-height:100vh;
  background:var(--color-bg);
  background-image:
    radial-gradient(1200px 600px at 10% -10%, rgba(228,240,255,.7), rgba(255,255,255,0)),
    radial-gradient(1000px 500px at 100% 0%, rgba(255,240,220,.6), rgba(255,255,255,0)),
    url('/images/gifchat-bg.png');
  background-size:cover;
  background-attachment:fixed;
  background-position:center;
  color:#111;
  font-size:var(--fz-base);
  line-height:1.5;
}
.container{ width:100%; max-width:800px; margin:30px auto; padding:20px; }

/* =========================
   FORMS & BUTTONS
========================= */
input, textarea{
  width:100%;
  height:37px; padding:10px;
  border:1px solid silver; border-radius:4px;
  outline:none;
}
input:focus, textarea:focus{
  border-color:#b7c4ff;
  box-shadow:0 0 0 3px rgba(180,198,255,.35);
}

.btn{
  display:inline-block; padding:0 10px; height:37px; line-height:37px;
  border-radius:4px; border:1px solid silver; background:#fff; color:var(--color-primary);
  text-decoration:none; cursor:pointer; font-size:12px; white-space:nowrap;
  transition:filter .15s ease, transform .02s ease;
}
.btn:hover{ filter:brightness(.98); }
.btn:active{ transform:translateY(1px); }
.btn-primary{ background:var(--color-primary); color:#fff; border-color:var(--color-primary); }
.btn-primary:hover{ filter:brightness(.95); }
.btn-light{ background:#fff; color:#333; border-color:#ddd; }
.btn-accent{ background:#4f46e5; color:#fff; border-color:#4f46e5; }
.btn-block{ width:100%; }

/* badge */
.badge{
  display:inline-block; padding:.1rem .5rem; border-radius:999px;
  font-size:11px; font-weight:700; vertical-align:middle; background:var(--chip-bg); color:#374151;
}
.badge.type-broadcast{ background:#fff3cd; color:#8a6d3b; border:1px solid #f6e3a6; }
.badge.type-local{ background:#eef2ff; color:#3730a3; border:1px solid #dfe3ff; }
.badge.type-whisper{ background:#f0f9ff; color:#075985; border:1px solid #d9f0ff; }

/* =========================
   NAV / BARS
========================= */
.topbar{
  position:relative; width:100vw; margin-left:calc(50% - 50vw); margin-right:calc(50% - 50vw);
  min-height:40px; display:flex; align-items:center; justify-content:center;
  background:#000; color:#fff; padding:8px 12px; box-shadow:0 1px 0 rgba(0,0,0,.06); z-index:100;
}
.navbar{
  width:100vw; margin-left:calc(50% - 50vw); margin-right:calc(50% - 50vw);
  background:#333; color:#fff;
  display:flex; justify-content:center; align-items:center; gap:18px; padding:12px 20px; flex-wrap:wrap;
}
.navbar a{ color:#fff; text-decoration:none; font-weight:bold; padding:6px 10px; border-radius:6px; }
.navbar a:hover{ background:rgba(255,255,255,.12); }

/* =========================
   ROOMS LIST
========================= */
.rooms-wrap{ width:100%; max-width:1000px; margin:20px auto; padding:0 12px; }
.rooms-card{
  background:rgba(255,255,255,.85); backdrop-filter:blur(6px);
  border:1px solid rgba(230,232,236,.8); border-radius:14px; box-shadow:var(--shadow-lg);
  padding:16px 18px 20px;
}
.rooms-head{ display:flex; justify-content:space-between; align-items:center; margin-bottom:12px; }
.rooms-head h2{ margin:0; font-size:18px; font-weight:700; }

.room-title{ width:100%; max-width:1000px; margin:22px auto 6px; font-size:24px; font-weight:800; }
.room-actions{ width:100%; max-width:1000px; margin:0 auto 12px; display:flex; gap:8px; justify-content:flex-end; }

.table-scroller{ width:100%; overflow-x:auto; }
.pretty-table{
  width:100%; table-layout:fixed; border-collapse:separate; border-spacing:0;
  background:#fff; border-radius:10px; font-size:14px;
}
.pretty-table th, .pretty-table td{
  text-align:center; vertical-align:middle; padding:10px 8px; word-break:keep-all;
}
.pretty-table thead th{ background:#f6f8fb; color:#374151; font-weight:700; border-bottom:1px solid #e5e7eb; }
.pretty-table tbody td{ border-bottom:1px solid #f1f3f5; }
.pretty-table tbody tr:nth-child(odd) td{ background:#fafbff; }
.pretty-table tbody tr:hover td{ background:#eef4ff; }

/* columns */
.col-title{ width:30%; } .col-type{ width:10%; } .col-count{ width:10%; }
.col-owner{ width:15%; } .col-action{ width:10%; } .col-created{ width:25%; }

/* cells */
.cell-title,.cell-owner{ overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.cell-title .title-text,.cell-owner .owner-text{
  display:inline-block; max-width:100%; overflow:hidden; text-overflow:ellipsis; white-space:nowrap;
}
.cell-type,.cell-count,.cell-created{ white-space:nowrap; }
.cell-created{ font-size:13px; color:#555; }
.cell-created .created-sep{ opacity:.6; }

/* always show columns */
#room-list th,#room-list td{ display:table-cell; }

/* =========================
   CHAT PANEL & MESSAGES
========================= */
.chat-panel{
  width:100%; max-width:800px; background:#fff; border:1px solid var(--color-border);
  border-radius:var(--radius-md); box-shadow:var(--shadow-md);
  display:flex; flex-direction:column; overflow:hidden;
}
.chat-list{
  padding:16px 14px 8px;
  display:flex; flex-direction:column; gap:10px;
  max-height:60vh; overflow:auto; scroll-behavior:smooth;
}

.message{ display:flex; align-items:flex-end; gap:10px; margin-bottom:8px; }
.message .avatar{
  --avatar-color:#888;
  width:34px; height:34px; border-radius:50%;
  display:grid; place-items:center; color:#fff; font-weight:800; font-size:13px;
  background:var(--avatar-color);
  flex:0 0 34px;
}
.bubble{
  background:#f4f6f8; border-radius:12px; padding:8px 10px; max-width:78%;
  border:1px solid #edf0f3;
}
.message.mine .bubble{ background:#e8f0ff; border-color:#dbe5ff; }
.message.other .bubble{ background:#f4f6f8; }
.message.system{ justify-content:center; }
.message.system .bubble{ max-width:100%; background:#fbfbfb; color:#555; border-color:#eee; }

.meta{ font-size:12px; color:#666; margin-bottom:4px; display:flex; align-items:center; gap:6px; flex-wrap:wrap; }
.text{ white-space:pre-wrap; word-break:break-word; }
.bubble-gif{ display:block; max-width:320px; width:100%; height:auto; border-radius:10px; margin-top:6px; }

/* message types */
.type-broadcast .bubble, .broadcast-bubble{ background:#fffbea; border-color:#ffe8a3; }
.type-whisper .bubble, .whisper-bubble{ background:#eff6ff; border-color:#dbeafe; }
.shout-icon{ font-size:16px; }
.whisper-in .bubble{ box-shadow:0 0 0 2px rgba(59,130,246,.15) inset; }
.whisper-out .bubble{ box-shadow:0 0 0 2px rgba(99,102,241,.15) inset; }

/* =========================
   COMPOSER (입력 영역)
========================= */
.composer{
  width:100%; max-width:800px; margin:10px auto 0; display:flex; flex-direction:column; gap:8px;
}
.composer-row{
  display:grid; grid-template-columns:auto 1fr auto; gap:8px; align-items:center;
}
.composer-row input[type="text"]{ height:37px; }
.composer-label{ font-size:12px; color:#666; }

/* Whisper form (scoped overrides) */
.composer-row.whisper{
  display:flex; align-items:center; gap:8px; flex-wrap:wrap;
  background:rgba(255,255,255,0.9); border-radius:10px; padding:8px 10px;
  border:1px solid #ddd; margin-top:6px;
}
.whisper-target{ font-size:13px; color:#333; margin-right:6px; white-space:nowrap; }
#whisper-chat-input{
  flex:1; min-width:150px; height:32px; font-size:13px; padding:6px 8px;
}
/* 이 범위에서 버튼 크기를 확실히 줄임 */
.composer-row.whisper .btn{
  height:32px; line-height:32px; font-size:13px; padding:0 10px;
}

/* visibility util */
.is-hidden{ display:none !important; }

/* =========================
   HERO (INDEX)
========================= */
.hero-card{
  background:rgba(255,255,255,.88); backdrop-filter:blur(6px);
  border:1px solid rgba(230,232,236,.8); border-radius:var(--radius-lg); box-shadow:var(--shadow-lg);
  display:grid; grid-template-columns:1.1fr 1fr; gap:22px; padding:24px 22px; align-items:center;
  width:100%; margin:24px auto;
}
.hero-text{ min-width:0; }
.hero-title{ margin:0 0 8px; font-size:clamp(24px, 4vw, 40px); font-weight:800; line-height:1.15; }
.hero-sub{ margin:0 0 16px; color:var(--color-muted); font-size:clamp(14px, 2.4vw, 16px); }
.hero-actions{ display:flex; gap:10px; flex-wrap:wrap; }
.hero-image-wrap{ display:grid; place-items:center; width:100%; max-width:520px; margin:0 auto; }
.hero-image{
  width:100%; height:auto; max-height:min(48vh, 520px); object-fit:contain; display:block;
  border-radius:12px; box-shadow:0 8px 24px rgba(0,0,0,.08);
}

/* =========================
   AUTH (LOGIN)
========================= */
.auth-wrap{ display:flex; width:100%; justify-content:center; }
.profile-wrap{
  width:100%; max-width:800px; background:rgba(255,255,255,.88);
  border:1px solid rgba(230,232,236,.8); border-radius:14px; box-shadow:var(--shadow-lg);
  padding:16px 18px; display:flex; align-items:center; gap:10px;
}
.auth-card{
  width:100%; max-width:420px; background:var(--color-card); backdrop-filter:blur(6px);
  border:1px solid rgba(230,232,236,.8); border-radius:var(--radius-lg); box-shadow:var(--shadow-lg);
  padding:22px 20px 18px; margin:12px auto 0;
}
.auth-title{ margin:0 0 6px; font-size:22px; font-weight:800; text-align:center; }
.auth-sub{ margin:0 0 18px; color:#555; font-size:14px; text-align:center; }
.input-group{ display:flex; flex-direction:column; gap:6px; margin-bottom:12px; }
.input-label{ font-size:13px; color:#444; }
.form-error{
  background:#ffecec; color:#b00020; border:1px solid #ffc7c7;
  border-radius:8px; padding:10px 12px; margin-bottom:12px; font-size:13px;
}

/* =========================
   RESPONSIVE
========================= */
@media (max-width:1024px){
  .col-title{ width:28%; }
  .col-owner{ width:12%; }
  .col-created{ width:25%; }
}
@media (max-width:960px){
  .hero-card{ grid-template-columns:1fr; text-align:center; padding:20px 18px; gap:16px; }
  .hero-actions{ justify-content:center; }
  .hero-image-wrap{ max-width:560px; }
}
@media (max-width:800px){
  .pretty-table{ font-size:13px; }
  .col-title{ width:27%; }
  .col-created{ width:25%; }
}
@media (max-width:640px){
  .pretty-table{ table-layout:auto; }
  .col-title{ width:auto; }
}
@media (max-width:560px){
  .hero-card{ padding:18px 14px; border-radius:14px; }
  .hero-title{ font-size:clamp(22px, 7vw, 30px); }
  .hero-sub{ font-size:14px; }
  .hero-image{ max-height:42vh; }
}
@media (max-width:480px){
  .auth-card{ padding:18px 14px; border-radius:14px; }
  .auth-title{ font-size:20px; }
  /* Whisper: 버튼/인풋 1열 */
  .composer-row.whisper{ flex-direction:column; align-items:stretch; }
  #whisper-chat-input{ width:100%; }
  .composer-row.whisper .btn{ width:100%; }
}

.divider {
  display: flex;
  align-items: center;
  gap: 8px;
  margin: 16px 0;
}
.divider-line {
  flex: 1 1 auto;
  height: 1px;
  background: #e5e7eb; /* gray-200 */
}
.divider-text {
  font-size: 12px;
  color: #9ca3af; /* gray-400 */
}
.kakao-login-btn img {
  cursor: pointer;
  transition: transform .06s ease;
}
.kakao-login-btn img:active {
  transform: scale(0.98);
}

.context-menu {
  position: fixed;
  z-index: 9999;
  min-width: 140px;
  padding: 6px;
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  background: #fff;
  box-shadow: 0 10px 20px rgba(0,0,0,.08), 0 2px 6px rgba(0,0,0,.06);
}
.context-menu[hidden] { display: none; }
.context-item {
  display: block;
  width: 100%;
  text-align: left;
  padding: 8px 10px;
  background: transparent;
  border: 0;
  border-radius: 6px;
  cursor: pointer;
  font-size: 14px;
}
.context-item:hover { background: #f3f4f6; }

/* =========================
   FRIEND REQUESTS
========================= */
/* =========================
   FRIEND REQUESTS (Sent)
========================= */
.friend-table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  background: #fff;
  border: 1px solid var(--color-border);
  border-radius: 12px;
  box-shadow: var(--shadow-md);
  overflow: hidden;
}

.friend-table thead th {
  background: var(--color-primary-weak);
  color: var(--color-primary);
  font-weight: 800;
  text-align: center;
  padding: 12px 10px;
  border-bottom: 1px solid var(--color-border);
}

.friend-table tbody td {
  text-align: center;
  padding: 12px 10px;
  border-bottom: 1px solid #f1f3f5;
}

.friend-table tbody tr:nth-child(odd) td { background: #fafbff; }
.friend-table tbody tr:hover td { background: #eef4ff; }

/* 상태 배지 */
.badge.status-accepted { background:#e7f7ef; color:#0a7a46; border:1px solid #ccefe0; }
.badge.status-pending  { background:#fff7e6; color:#8a6d3b; border:1px solid #f6e3a6; }
.badge.status-blocked  { background:#feebee; color:#b00020; border:1px solid #f7c7cf; }
.badge.status-etc      { background:#eef2ff; color:#3730a3; border:1px solid #dfe3ff; }

/* 소형 버튼 */
.btn-sm { height: 28px; line-height: 28px; font-size: 12px; padding: 0 10px; }

/* 페이지 타이틀 */
.page-title {
  width:100%;
  max-width:800px;
  margin:22px auto 12px;
  font-size: var(--h1);
  font-weight: 800;
  text-align: center;
}
