<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title><%= (typeof title !== 'undefined' && title) ? title : 'GIF Chat' %></title>
  <link rel="stylesheet" href="/css/main.css">
</head>
<body>
  <header>
    <!-- 상단 바 (상태/알림/프로필 간단 표시) -->
    <div class="topbar">
      <% if (typeof user !== 'undefined' && user) { %>
        <span class="topbar-text">
          안녕하세요, <strong><%= user.nick || user.email %> : <%= user._id%></strong> 님 😊
        </span>
      <% } else { %>
        <span class="topbar-text">GIF Chat에 오신 것을 환영합니다 🎉</span>
      <% } %>
    </div>

    <% const menu = (typeof activeMenu !== 'undefined' && activeMenu) ? activeMenu : ''; %>
    <!-- 메뉴 바 -->
    <nav class="navbar">
    <% if (typeof user !== 'undefined' && user) { %>
      <a href="/auth/logout">로그아웃</a>
      <% if (menu === 'friends') { %>
        <!-- 친구목록 화면일 때: 채팅목록만 보이게 -->
        <a href="/">채팅목록</a>
      <% } else if (menu === 'rooms') { %>
        <!-- 채팅목록 화면일 때: 친구목록만 보이게 -->
        <a href="/friend">친구목록</a>
    <% } else { %>
        <!-- 그 외(미지정)일 때: 둘 다 보이게(선택) -->
        <a href="/">채팅목록</a>
        <a href="/friend">친구목록</a>
      <% } %>
  <% } else { %>
    <a href="/">홈</a>
    <a href="/auth/login">로그인</a>
    <a href="/auth/join">회원가입</a>
  <% } %>
</nav>

  </header>

  <main class="container">
    <%- body %>
  </main>

  <footer>
    <p>&copy; 2025 GIF Chat</p>
  </footer>
</body>
</html>
